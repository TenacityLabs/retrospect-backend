<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text Verification API Test</title>
</head>
<body>
    <h1>Text Verification API Test</h1>
    
    <h2>Send Verification</h2>
    <input type="tel" id="phoneNumber" placeholder="Enter phone number">
    <button onclick="sendVerification()">Send Verification</button>
    
    <h2>Verify Code</h2>
    <input type="tel" id="verifyPhoneNumber" placeholder="Enter phone number">
    <input type="text" id="verificationCode" placeholder="Enter verification code">
    <button onclick="verifyCode()">Verify Code</button>
    
    <div id="result"></div>

    <script>
        const API_BASE_URL = 'http://localhost:8080'; 

        async function sendVerification() {
            const phoneNumber = document.getElementById('phoneNumber').value;
            try {
                const response = await fetch(`${API_BASE_URL}/api/v1/text-verification/send`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ phone: phoneNumber }),
                });
                const data = await response.json();
                document.getElementById('result').innerText = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('result').innerText = `Error: ${error.message}`;
            }
        }

        async function verifyCode() {
            const phoneNumber = document.getElementById('verifyPhoneNumber').value;
            const code = document.getElementById('verificationCode').value;
            try {
                const response = await fetch(`${API_BASE_URL}/api/v1/text-verification/verify`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ phone: phoneNumber, code: code }),
                });
                const data = await response.json();
                document.getElementById('result').innerText = JSON.stringify(data, null, 2);
            } catch (error) {
                document.getElementById('result').innerText = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>